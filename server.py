import socket

from constants import *



def get_user(server: socket.socket):
    server.bind((SERVER_IP, PORT))
    server.listen(NUMBER_OF_USERS)
    return server.accept()
    

def get_file(client: socket.socket):
    bytes_number_of_packets = client.recv(2)
    number_of_packets = int.from_bytes(bytes_number_of_packets,"big")
    data: bytes = b""
    for packet_index in range(number_of_packets):
        data += client.recv(BUFFER_SIZE)
    with open("temp.pdf", "wb") as file:
        file.write(data)
    return number_of_packets

def main():
    server = socket.socket()
    client, client_address = get_user(server)
    packet = get_file(client)

if __name__ == "__main__":
    main()