from our_dataset import OurDataset
from torch.utils.data import DataLoader
import os
from constants import *

#creating the dataset
def create_dataset(json_path=None):
    dataset = OurDataset()
    #getting the directories (the names of the familys) from the main dataset directory
    dirs = os.listdir(NEW_DATASET_DIRECTORY)
    for dir in dirs:
        dir_path = NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir
        if os.path.isdir(dir_path):
            files = os.listdir(dir_path)
            for file in files:
                #going through each file and adding it into the dataset by it's path
                file_path = dir_path + DIRECTORY_SEPERATOR + file
                if os.path.isfile(file_path) and file.endswith(".png"):
                    dataset.__add__(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir + DIRECTORY_SEPERATOR + file)
    # dataset.create_dataset_from_current_data(json_path)
    return dataset

if __name__ == "__main__":
    # create_dataset
    #("default.json")
    create_dataset(JSON_NAME)