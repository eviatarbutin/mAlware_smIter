import sys
import cv2
import os

STARTING_DIRECTORY = "malimg_original_dataset_imgs"
NEW_DATASET_DIRECTORY = "malimg_fixed_dataset_imgs"
FIXED_SIZE = (192, 192)
# FIXED_SIZE = (1050, 1610)
# FIXED_SIZE = (256, 256)


def main():
    dirs = os.listdir(STARTING_DIRECTORY)
    for dir in dirs:
        dir_path = STARTING_DIRECTORY + "\\" + dir
        if os.path.isdir(STARTING_DIRECTORY + "\\" + dir):
            files = os.listdir(dir_path)
            for file in files:
                file_path = dir_path + "\\" + file
                if os.path.isfile(file_path) and file.endswith(".png"):
                    img = cv2.imread(file_path)

                    # Show original image
                    # cv2.imshow('Original', img)
                    # cv2.waitKey(0)                
                    # cv2.destroyAllWindows()
                    
                    size = img.size

                    img = cv2.resize(img, FIXED_SIZE)
                    print(NEW_DATASET_DIRECTORY + "\\" + dir + "\\" + file)
                    if not os.path.isdir(NEW_DATASET_DIRECTORY + "\\" + dir + "\\"):
                        os.makedirs(NEW_DATASET_DIRECTORY + "\\" + dir + "\\")
                    cv2.imwrite(NEW_DATASET_DIRECTORY + "\\" + dir + "\\" + file ,img)
                    
                    # Show resized image
                    # cv2.imshow('New Sized Image', img)
                    # cv2.waitKey(0)                
                    # cv2.destroyAllWindows()

if __name__ == "__main__":
    main()