import cv2
import os

# FIXED_SIZE = (1050, 1610)
# FIXED_SIZE = (256, 256)
from constants import *

def get_weights() -> dict:
    dictionary = {}
    dirs = os.listdir(STARTING_DIRECTORY)
    for dir in dirs:
        dir_path = STARTING_DIRECTORY + DIRECTORY_SEPERATOR + dir
        if os.path.isdir(STARTING_DIRECTORY + DIRECTORY_SEPERATOR + dir):
            files = os.listdir(dir_path)
            dictionary[dir] = 80/len(files)

    return dictionary


def main():
    dirs = os.listdir(STARTING_DIRECTORY)
    for dir in dirs:
        dir_path = STARTING_DIRECTORY + DIRECTORY_SEPERATOR + dir
        if os.path.isdir(dir_path):
            files = os.listdir(dir_path)
            for file in files:
                file_path = dir_path + DIRECTORY_SEPERATOR + file
                if os.path.isfile(file_path) and file.endswith(".png"):
                    img = cv2.imread(file_path)

                    # Show original image
                    # cv2.imshow('Original', img)
                    # cv2.waitKey(0)                
                    # cv2.destroyAllWindows()
                    
                    size = img.size

                    img = cv2.resize(img, FIXED_SIZE)
                    if not os.path.isdir(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir + DIRECTORY_SEPERATOR):
                        os.makedirs(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir + DIRECTORY_SEPERATOR)
                    cv2.imwrite(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir + DIRECTORY_SEPERATOR + file ,img)
                    
                    # Show resized image
                    # cv2.imshow('New Sized Image', img)
                    # cv2.waitKey(0)                
                    # cv2.destroyAllWindows()

if __name__ == "__main__":
    main()