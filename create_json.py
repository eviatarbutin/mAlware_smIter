from our_dataset import OurDataset
from torch.utils.data import DataLoader
import os

DIRECTORY_SEPERATOR = "/"


NEW_DATASET_DIRECTORY = "malimg_fixed_dataset_imgs"
JSON_NAME = "new_linux_dataset.json"

def create_json(json_path=None):
    dataset = OurDataset()
    dirs = os.listdir(NEW_DATASET_DIRECTORY)
    for dir in dirs:
        dir_path = NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir
        if os.path.isdir(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir):
            files = os.listdir(dir_path)
            for file in files:
                file_path = dir_path + DIRECTORY_SEPERATOR + file
                if os.path.isfile(file_path) and file.endswith(".png"):
                    dataset.__add__(NEW_DATASET_DIRECTORY + DIRECTORY_SEPERATOR + dir + DIRECTORY_SEPERATOR + file)
    # dataset.create_dataset_from_current_data(json_path)
    return dataset
if __name__ == "__main__":
    # create_json("default.json")
    create_json(JSON_NAME)